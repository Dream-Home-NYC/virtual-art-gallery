<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Critical: Force no-referrer to allow access to Museum CDNs which block hotlinking -->
    <meta name="referrer" content="no-referrer">
    <title>Virtual Art Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400&display=swap');

        body {
            background-color: #000;
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            height: 100vh;
            margin: 0;
        }

        h1, .artwork-title {
            font-family: 'Playfair Display', serif;
        }

        .art-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
            background-color: #000;
            overflow: hidden;
            padding: 60px 4vw 80px 4vw;
            box-sizing: border-box;
        }

        .artwork-image {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            box-shadow: 0 0 100px rgba(0, 0, 0, 0.8);
            transition: opacity 1.8s ease-in-out, transform 1.8s ease-in-out;
            opacity: 0;
            transform: scale(1.1); 
        }

        .artwork-image.active {
            opacity: 1;
            transform: scale(1.3);
        }

        .info-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 50;
            transition: opacity 1.2s ease-in-out;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
            padding: 80px 3vw 40px 3vw;
            opacity: 0;
            pointer-events: none;
        }

        .progress-bar-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: rgba(255,255,255,0.02);
            z-index: 60;
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: #d4af37;
            transition: width 1s linear;
        }

        .nav-btn {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 12px;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }

        .nav-btn:hover {
            opacity: 1;
            background: rgba(212, 175, 55, 0.4);
            transform: scale(1.1);
            border-color: rgba(212, 175, 55, 0.6);
        }

        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 40%, rgba(0,0,0,0.95) 100%);
            pointer-events: none;
            z-index: 5;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 38px;
            height: 20px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(255,255,255,0.15);
            transition: .4s;
            border-radius: 20px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 14px; width: 14px;
            left: 3px; bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: #d4af37; }
        input:checked + .slider:before { transform: translateX(18px); }

        #loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            display: none;
            text-align: center;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(212, 175, 55, 0.1);
            border-top: 2px solid #d4af37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #error-toast {
            position: fixed;
            top: 15px;
            right: 15px;
            background: rgba(153, 27, 27, 0.95);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 1000;
            font-size: 0.75rem;
            transform: translateY(-120px);
            transition: transform 0.4s ease;
        }
        #error-toast.visible { transform: translateY(0); }

        /* Custom Dropdown Styling */
        select {
            background: transparent;
            color: rgba(255, 255, 255, 0.5);
            border: none;
            font-size: 8px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            outline: none;
            appearance: none;
            text-align: right;
        }
        select option {
            background: #111;
            color: #fff;
        }
        select:hover {
            color: #d4af37;
        }
    </style>
</head>
<body>

    <div class="vignette"></div>
    <div id="error-toast">Connection issue. Retrying...</div>

    <audio id="bg-music" loop>
        <source src="https://upload.wikimedia.org/wikipedia/commons/b/be/Clair_de_lune_%28Claude_Debussy%29_Suite_bergamasque.ogg" type="audio/ogg">
    </audio>

    <header class="fixed top-0 left-0 w-full p-6 flex justify-between items-center z-50 pointer-events-none">
        <div class="flex items-center gap-3 pointer-events-auto">
            <div class="w-0.5 h-5 bg-yellow-600"></div>
            <div>
                <h1 class="text-lg tracking-widest font-light opacity-60">VIRTUAL GALLERY</h1>
            </div>
        </div>
        
        <div class="flex items-center gap-4 bg-black/60 backdrop-blur-md p-2 px-4 rounded-full border border-white/10 pointer-events-auto shadow-2xl">
            <div class="flex items-center gap-3 px-1">
                <span class="text-[8px] uppercase tracking-wider opacity-40">Curated</span>
                <label class="switch">
                    <input type="checkbox" id="mode-toggle" onchange="toggleMode()">
                    <span class="slider"></span>
                </label>
                <span class="text-[8px] uppercase tracking-wider opacity-40">Discovery</span>
            </div>
            <div class="hidden md:flex items-center gap-2 text-[8px] tracking-widest opacity-30 border-l border-white/20 pl-4 font-mono">
                <select id="refresh-rate" onchange="changeRefreshRate()">
                    <option value="60000">1 min</option>
                    <option value="300000" selected>5 min</option>
                    <option value="900000">15 min</option>
                    <option value="1800000">30 min</option>
                    <option value="3600000">1 hr</option>
                    <option value="7200000">2 hr</option>
                    <option value="14400000">4 hr</option>
                    <option value="28800000">8 hr</option>
                    <option value="43200000">12 hr</option>
                    <option value="86400000">24 hr</option>
                </select>
                <div id="timer-label">5:00</div>
            </div>
        </div>
    </header>

    <main class="art-container" id="gallery">
        <div id="loading-indicator">
            <div class="spinner"></div>
        </div>
        <img id="artwork" src="" alt="Famous Artwork" class="artwork-image" referrerpolicy="no-referrer">
        
        <div class="info-overlay" id="info">
            <h2 class="artwork-title text-xl md:text-2xl mb-1 italic leading-snug text-white/90 font-normal" id="title">Loading...</h2>
            <div class="flex flex-wrap items-baseline gap-x-3">
                <p class="text-base text-gray-400 font-light" id="artist"></p>
                <p class="text-[9px] tracking-[0.2em] uppercase opacity-30 font-semibold" id="year"></p>
            </div>
        </div>
    </main>

    <div class="fixed right-5 bottom-8 flex items-center gap-2 z-50">
        <button id="audio-btn" class="nav-btn" onclick="toggleAudio()" title="Audio Guide">
            <svg id="audio-on-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            <svg id="audio-off-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
        </button>

        <button class="nav-btn" onclick="previousArt()" id="prev-btn" title="Previous">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
        </button>
        <button class="nav-btn" onclick="nextArt()" title="Next">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
        </button>
        <button class="nav-btn" onclick="toggleFullscreen()" title="Fullscreen">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/></svg>
        </button>
    </div>

    <div class="progress-bar-container">
        <div id="progress-fill"></div>
    </div>

    <script>
        /**
         * Met Museum Curated List - Expanded
         */
        const curatedObjectIds = [
            459123, 11445, 435882, 437133, 436533, 336327, 438815, 435809,
            436105, 437984, 437980, 436121, 435817, 436545, 10592, 436535, 437397, 437396,
            437869, 437879, 437881, 435739, 436504, 436529, 436531, 436839, 436947, 437056,
            437097, 437153, 437175, 437198, 437202, 437299, 437326, 437329, 437430, 437447,
            437455, 437493, 437502, 437549, 437609, 437654, 437701, 437769, 437822, 437826,
            435621, 435702, 435812, 435868, 435904, 435962, 436002, 436021, 436058, 436063,
            436095, 436101, 436250, 436530, 436622, 436896, 436965, 437034, 437117, 437160,
            437203, 437243, 437286, 437321, 437372, 437421, 437482, 437532, 437580, 437633,
            437688, 437732, 437785, 437841, 437905, 438012, 438055, 438112, 438166, 438210,
            438255, 438302, 438350, 438400, 438450, 438500, 438550, 438600, 438650, 438700,
            438750, 438800, 438850, 438900, 438950, 439000, 439050, 439100, 439150, 439200,
            439250, 439300, 439350, 439400, 439450, 439500, 439550, 439600, 439650, 439700,
            439750, 439800, 439850, 439900, 439950, 440000, 440050, 440100, 440150, 440200,
            440250, 440300, 440350, 440400, 440450, 440500, 440550, 440600, 440650, 440700,
            440750, 440800, 440850, 440900, 440950, 441000, 441050, 441100, 441150, 441200,
            441250, 441300, 441350, 441400, 441450, 441500, 441550, 441600, 441650, 441700,
            441750, 441800, 441850, 441900, 441950
        ];

        /**
         * World Masterpieces Pool.
         */
        const worldMasterpieces = [
            { title: "Campbell's Soup Cans", artist: "Andy Warhol", year: "1962", url: "https://upload.wikimedia.org/wikipedia/commons/e/ed/Andy_Warhol%2C_Campbell%27s_Soup_Cans%2C_1962.jpg" },
            { title: "Mona Lisa", artist: "Leonardo da Vinci", year: "c. 1503–1506", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/800px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg" },
            { title: "The Starry Night", artist: "Vincent van Gogh", year: "1889", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg/1280px-Van_Gogh_-_Starry_Night_-_Google_Art_Project.jpg" },
            { title: "Sunflowers (Arles)", artist: "Vincent van Gogh", year: "1888", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Vincent_Willem_van_Gogh_127.jpg/1024px-Vincent_Willem_van_Gogh_127.jpg" },
            { title: "The Creation of Adam", artist: "Michelangelo", year: "c. 1512", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg/1280px-Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg" },
            { title: "Girl with a Pearl Earring", artist: "Johannes Vermeer", year: "1665", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Johannes_Vermeer_%281632-1675%29_-_The_Girl_With_The_Pearl_Earring_%281665%29.jpg/1024px-Johannes_Vermeer_%281632-1675%29_-_The_Girl_With_The_Pearl_Earring_%281665%29.jpg" },
            { title: "The Kiss", artist: "Gustav Klimt", year: "1908", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Gustav_Klimt_016.jpg/1024px-Gustav_Klimt_016.jpg" },
            { title: "The Great Wave off Kanagawa", artist: "Hokusai", year: "c. 1831", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Tsunami_by_hokusai_19th_century.jpg/1280px-Tsunami_by_hokusai_19th_century.jpg" },
            { title: "The Night Watch", artist: "Rembrandt", year: "1642", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/The_Night_Watch_-_HD.jpg/1280px-The_Night_Watch_-_HD.jpg" },
            { title: "Liberty Leading the People", artist: "Eugène Delacroix", year: "1830", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Eug%C3%A8ne_Delacroix_-_Le_28_juillet._La_Libert%C3%A9_guidant_le_peuple.jpg/1280px-Eug%C3%A8ne_Delacroix_-_Le_28_juillet._La_Libert%C3%A9_guidant_le_peuple.jpg" },
            { title: "The Persistence of Memory", artist: "Salvador Dalí", year: "1931", url: "https://upload.wikimedia.org/wikipedia/en/thumb/d/dd/The_Persistence_of_Memory.jpg/300px-The_Persistence_of_Memory.jpg" },
            { title: "The Birth of Venus", artist: "Sandro Botticelli", year: "c. 1485", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg/1280px-Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg" },
            { title: "Whistler's Mother", artist: "James McNeill Whistler", year: "1871", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Whistlers_Mother_high_res.jpg/1024px-Whistlers_Mother_high_res.jpg" },
            { title: "American Gothic", artist: "Grant Wood", year: "1930", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Grant_Wood_-_American_Gothic_-_Google_Art_Project.jpg/1024px-Grant_Wood_-_American_Gothic_-_Google_Art_Project.jpg" },
            { title: "The Scream", artist: "Edvard Munch", year: "1893", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg/1024px-Edvard_Munch%2C_1893%2C_The_Scream%2C_oil%2C_tempera_and_pastel_on_cardboard%2C_91_x_73_cm%2C_National_Gallery_of_Norway.jpg" },
            { title: "Saturn Devouring His Son", artist: "Francisco Goya", year: "1819", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Francisco_de_Goya%2C_Saturno_devorando_a_su_hijo_%281819-1823%29.jpg/800px-Francisco_de_Goya%2C_Saturno_devorando_a_su_hijo_%281819-1823%29.jpg" },
            { title: "The Swing", artist: "Jean-Honoré Fragonard", year: "1767", url: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Jean-Honor%C3%A9_Fragonard_-_The_Swing.jpg/1024px-Jean-Honor%C3%A9_Fragonard_-_The_Swing.jpg" }
        ];

        let localArtworks = [...worldMasterpieces];
        let apiObjectIds = [];
        let currentIndex = 0;
        let isApiMode = false;
        let isLoading = false;
        let rotationTime = 300000; // Default 5 minutes
        let startTime = Date.now();
        let isAudioPlaying = false;

        const artImg = document.getElementById('artwork');
        const titleEl = document.getElementById('title');
        const artistEl = document.getElementById('artist');
        const yearEl = document.getElementById('year');
        const infoEl = document.getElementById('info');
        const progressFill = document.getElementById('progress-fill');
        const timerLabel = document.getElementById('timer-label');
        const loadingEl = document.getElementById('loading-indicator');
        const bgMusic = document.getElementById('bg-music');
        const errorToast = document.getElementById('error-toast');

        async function fetchWithRetry(url, options = {}, retries = 5, backoff = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return await response.json();
            } catch (err) {
                if (retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, backoff));
                    return fetchWithRetry(url, options, retries - 1, backoff * 2);
                }
                throw err;
            }
        }

        async function initGallery() {
            loadingEl.style.display = 'block';
            try {
                const searchData = await fetchWithRetry('https://collectionapi.metmuseum.org/public/collection/v1/search?isHighlight=true&hasImages=true&q=painting');
                apiObjectIds = searchData.objectIDs || [];
                
                const initialBatchIds = curatedObjectIds.slice(0, 15);
                await fetchBatch(initialBatchIds);
                
                updateGallery();
                setInterval(updateProgress, 1000);
                fetchRemainingData();
            } catch (e) { 
                console.error("Init Error:", e);
                showToast("Archive link unstable. Retrying...");
                if (localArtworks.length > 0) updateGallery();
            }
        }

        async function fetchBatch(ids) {
            const promises = ids.map(id => fetchWithRetry(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`).catch(() => null));
            const results = await Promise.all(promises);
            results.forEach(art => {
                if (art && (art.primaryImage || art.primaryImageSmall)) {
                    localArtworks.push({
                        title: art.title || "Untitled", 
                        artist: art.artistDisplayName || "Unknown Artist", 
                        year: art.objectDate || "N/A", 
                        url: art.primaryImageSmall || art.primaryImage
                    });
                }
            });
        }

        async function fetchRemainingData() {
            const remaining = curatedObjectIds.slice(15);
            for (let i = 0; i < remaining.length; i += 10) {
                await fetchBatch(remaining.slice(i, i + 10));
                await new Promise(r => setTimeout(r, 1500));
            }
        }

        async function fetchDiscoveryArt() {
            if (isLoading) return;
            isLoading = true;
            loadingEl.style.display = 'block';
            artImg.classList.remove('active');
            infoEl.style.opacity = '0';

            const useSpecialPool = Math.random() < 0.3;

            if (useSpecialPool) {
                const randomArt = worldMasterpieces[Math.floor(Math.random() * worldMasterpieces.length)];
                renderArtwork(randomArt);
            } else if (apiObjectIds.length > 0) {
                let attempts = 0;
                while (attempts < 5) {
                    const randomId = apiObjectIds[Math.floor(Math.random() * apiObjectIds.length)];
                    try {
                        const art = await fetchWithRetry(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${randomId}`, {}, 1);
                        const url = art.primaryImageSmall || art.primaryImage;
                        if (url) {
                            renderArtwork({ 
                                title: art.title || "Untitled", 
                                artist: art.artistDisplayName || "Unknown Artist", 
                                year: art.objectDate || "N/A", 
                                url: url 
                            });
                            return;
                        }
                    } catch (e) {}
                    attempts++;
                }
                renderArtwork(worldMasterpieces[Math.floor(Math.random() * worldMasterpieces.length)]);
            } else {
                isLoading = false;
                toggleMode(false);
            }
        }

        function renderArtwork(art) {
            const tempImg = new Image();
            tempImg.referrerPolicy = "no-referrer";
            tempImg.src = art.url;
            tempImg.onload = () => {
                artImg.src = art.url;
                titleEl.innerText = art.title;
                artistEl.innerText = art.artist;
                yearEl.innerText = art.year;
                loadingEl.style.display = 'none';
                artImg.classList.add('active');
                infoEl.style.opacity = '1';
                isLoading = false;
                startTime = Date.now();
            };
            tempImg.onerror = () => {
                isLoading = false;
                if (isApiMode) fetchDiscoveryArt();
                else nextArt();
            };
        }

        function toggleMode(forcedState) {
            const toggle = document.getElementById('mode-toggle');
            if (forcedState !== undefined) toggle.checked = forcedState;
            isApiMode = toggle.checked;
            updateGallery();
        }

        function updateGallery() {
            if (isApiMode) {
                fetchDiscoveryArt();
            } else if (localArtworks.length > 0) {
                renderArtwork(localArtworks[currentIndex]);
            }
        }

        function nextArt() {
            if (isLoading) return;
            if (isApiMode) {
                fetchDiscoveryArt();
            } else if (localArtworks.length > 0) {
                currentIndex = (currentIndex + 1) % localArtworks.length;
                updateGallery();
            }
        }

        function previousArt() {
            if (isLoading || isApiMode || localArtworks.length === 0) return;
            currentIndex = (currentIndex - 1 + localArtworks.length) % localArtworks.length;
            updateGallery();
        }

        function toggleAudio() {
            if (!isAudioPlaying) {
                bgMusic.play().catch(() => {});
                document.getElementById('audio-on-icon').classList.remove('hidden');
                document.getElementById('audio-off-icon').classList.add('hidden');
            } else {
                bgMusic.pause();
                document.getElementById('audio-on-icon').classList.add('hidden');
                document.getElementById('audio-off-icon').classList.remove('hidden');
            }
            isAudioPlaying = !isAudioPlaying;
        }

        function changeRefreshRate() {
            const select = document.getElementById('refresh-rate');
            rotationTime = parseInt(select.value);
            startTime = Date.now();
            updateProgress();
        }

        function updateProgress() {
            if (isLoading) return;
            const elapsed = Date.now() - startTime;
            const remaining = Math.max(0, rotationTime - elapsed);
            
            // Handle timer label display (HH:MM:SS or MM:SS)
            const hours = Math.floor(remaining / 3600000);
            const minutes = Math.floor((remaining % 3600000) / 60000);
            const seconds = Math.floor((remaining % 60000) / 1000);
            
            let timeString = "";
            if (hours > 0) {
                timeString = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            } else {
                timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            
            timerLabel.innerText = timeString;
            progressFill.style.width = Math.min((elapsed / rotationTime) * 100, 100) + '%';
            
            if (elapsed >= rotationTime) nextArt();
        }

        function showToast(msg) {
            errorToast.innerText = msg;
            errorToast.classList.add('visible');
            setTimeout(() => errorToast.classList.remove('visible'), 5000);
        }

        async function toggleFullscreen() {
            try {
                if (!document.fullscreenElement) {
                    if (document.documentElement.requestFullscreen) await document.documentElement.requestFullscreen();
                } else {
                    if (document.exitFullscreen) await document.exitFullscreen();
                }
            } catch (err) { showToast("Fullscreen restricted."); }
        }

        window.onload = initGallery;
    </script>
</body>
</html>
